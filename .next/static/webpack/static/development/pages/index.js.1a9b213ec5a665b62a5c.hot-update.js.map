{"version":3,"file":"static/webpack/static/development/pages/index.js.1a9b213ec5a665b62a5c.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Link from 'next/link.js';\n\nimport { ParallaxProvider } from 'react-scroll-parallax';\nimport { ParallaxBanner } from 'react-scroll-parallax';\nimport { getNews } from '../helpers/News'\nimport { dateDiff } from '../helpers/Shared'\nimport LazyLoad from 'react-lazyload';\nimport Loader from '../components/Loader/Loader'\nimport Card from '../components/News/Card'\nimport FlipCard from '../components/Home/FlipCard/FlipCard'\nimport PresentationVF from '../components/Home/Presentation/PresentationVF'\nimport PresentationVA from '../components/Home/Presentation/PresentationVA'\nimport DescriptionVF from '../components/Home/Description/DescriptionVF'\nimport DescriptionVA from '../components/Home/Description/DescriptionVA'\n\nimport banner from '../public/img/banner.jpg'\nimport homescreen from '../public/img/homescreen.jpg'\nimport homescreen2 from '../public/img/homescreen2.jpg'\nimport homescreen3 from '../public/img/homescreen3.jpg'\n\nconst Index = (props) => {\n    const [news, setNews] = useState([]);\n    const [loader, setLoader] = useState(true);\n\n    useEffect(() => {\n      const fetchDatas = async () => {\n        let currentNews = [...await getNews()]\n        currentNews.length = 4\n        setNews(currentNews)\n        setLoader(false)\n      }\n\n      const cache = JSON.parse(localStorage.getItem('cache'))\n      if (cache.news) {\n        const currentNews = [...cache.news]\n        currentNews.length = 4\n        setNews(currentNews)\n        setLoader(false)\n        if(dateDiff(new Date(cache.newsDate), new Date()).min > 5)\n          fetchDatas()\n      } else {\n        fetchDatas()\n      }\n    }, []);\n\n    return (\n      <div className=\"Home\">\n\n        <ParallaxProvider>\n          <ParallaxBanner className=\"homescreen banner\" layers={[{ image: banner, amount: 0.5 }]} style={{ height: '300px' }}>\n            <h1 className=\"title\">HOME</h1>\n          </ParallaxBanner>\n          <FlipCard front={<PresentationVF />} back={<PresentationVA />} />\n          <LazyLoad placeholder={<Loader />}>\n            <ParallaxBanner className=\"homescreen\" layers={[{ image: homescreen2, amount: 0.5 }]} style={{ height: '450px' }}></ParallaxBanner>\n          </LazyLoad>\n          <FlipCard front={<DescriptionVF />} back={<DescriptionVA />} />\n          <LazyLoad placeholder={<Loader />}>\n            <ParallaxBanner className=\"homescreen\" layers={[{ image: homescreen3, amount: 0.5 }]} style={{ height: '450px' }}></ParallaxBanner>\n          </LazyLoad>\n          <section>\n            <div className=\"news\">\n              <h2>Last News</h2>\n              <div className=\"card-container\">\n                {loader ? <Loader /> :\n                  news.map((item, index) =>\n                    <Card key={index} news={item} />\n                  )\n                }\n              </div>\n              <div className=\"cta\">\n                <Link href={'/news'}><a>Voir plus</a></Link>\n              </div>\n            </div>\n            </section>\n          <LazyLoad placeholder={<Loader />}>\n            <ParallaxBanner className=\"homescreen\" layers={[{ image: homescreen, amount: 0.5 }]} style={{ height: '450px' }}></ParallaxBanner>\n          </LazyLoad>\n        </ParallaxProvider>\n\n      </div>\n    );\n  }\n\nIndex.getInitialProps = async (context) => {\n    if(context.req) {\n        const news = getNews();\n        return {news}\n    }\n    return {}\n}\n\nexport default Index;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AAAA;AACA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;;;;A","sourceRoot":""}