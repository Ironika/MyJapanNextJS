{"ast":null,"code":"import _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport { isInList } from './Shared';\nimport { ANIME_SEIKOU, UNIVERSANIMEIZ } from '../rss';\nimport Axios from 'axios';\nimport { API } from '../api';\nexport var getApiAnimes = function getApiAnimes() {\n  var _ref, data;\n\n  return _regeneratorRuntime.async(function getApiAnimes$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(Axios.get(\"\".concat(API, \"/api/animes\")));\n\n        case 3:\n          _ref = _context.sent;\n          data = _ref.data;\n          return _context.abrupt(\"return\", data);\n\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(_context.t0);\n\n        case 11:\n          return _context.abrupt(\"return\", []);\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 8]]);\n};\nexport var getAnimes = function getAnimes() {\n  var animes, cache;\n  return _regeneratorRuntime.async(function getAnimes$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          animes = [];\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(getAnimeSeikou(animes));\n\n        case 3:\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(getUniversAnimeiz(animes));\n\n        case 5:\n          cache = JSON.parse(localStorage.getItem('cache'));\n          cache.animes = animes;\n          cache.animesDate = new Date();\n          localStorage.setItem('cache', _JSON$stringify(cache));\n          return _context2.abrupt(\"return\", animes);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nvar getAnimeSeikou = function getAnimeSeikou(array) {\n  var i, json;\n  return _regeneratorRuntime.async(function getAnimeSeikou$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          i = 1;\n\n        case 1:\n          if (!(i <= 2)) {\n            _context3.next = 9;\n            break;\n          }\n\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(Axios.get('https://cors-anywhere.herokuapp.com/' + ANIME_SEIKOU + i + '/'));\n\n        case 4:\n          json = _context3.sent;\n          formatJsonAnimeSeikou(json, array);\n\n        case 6:\n          i++;\n          _context3.next = 1;\n          break;\n\n        case 9:\n          return _context3.abrupt(\"return\", array);\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n\nvar getUniversAnimeiz = function getUniversAnimeiz(array) {\n  var i, json;\n  return _regeneratorRuntime.async(function getUniversAnimeiz$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          i = 1;\n\n        case 1:\n          if (!(i <= 2)) {\n            _context4.next = 9;\n            break;\n          }\n\n          _context4.next = 4;\n          return _regeneratorRuntime.awrap(Axios.get('https://cors-anywhere.herokuapp.com/' + UNIVERSANIMEIZ + i + '/'));\n\n        case 4:\n          json = _context4.sent;\n          formatJsonUniversAnimeiz(json, array);\n\n        case 6:\n          i++;\n          _context4.next = 1;\n          break;\n\n        case 9:\n          return _context4.abrupt(\"return\", array);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n};\n\nvar formatJsonAnimeSeikou = function formatJsonAnimeSeikou(json, array) {\n  var doc = new DOMParser().parseFromString(json.data, 'text/html');\n  var items = doc.getElementsByClassName('slide-entry');\n\n  for (var i = 0; i < items.length; i++) {\n    var title = items[i].children[3].children[5].innerText;\n    title = title.replace('VOSTFR', '');\n    title = title.replace('vostfr', '');\n\n    if (isInList(title.toUpperCase(), 'animes')) {\n      var img = items[i].children[0].children[0].attributes[2].value;\n      var date = items[i].children[3].children[3].innerText;\n      var link = items[i].children[0].href;\n      var item = {\n        title: title,\n        link: link,\n        // pubDate: date,\n        site: 'Anime Seikou',\n        img: img,\n        lang: 'VOSTFR'\n      };\n      if (!isInArray(item, array)) array.push(item);\n    }\n  }\n};\n\nvar formatJsonUniversAnimeiz = function formatJsonUniversAnimeiz(json, array) {\n  var doc = new DOMParser().parseFromString(json.data, 'text/html');\n  var items = doc.getElementsByClassName('recent-posts')[0];\n\n  for (var i = 0; i < items.children.length; i++) {\n    var title = items.children[i].children[1].children[1].innerText;\n    title = title.replace('VOSTFR', '');\n    title = title.replace('vostfr', '');\n\n    if (isInList(title.toUpperCase(), 'animes') && !title.includes('VF')) {\n      var episode = items.children[i].children[1].children[3].innerText;\n      var img = items.children[i].children[0].children[0].children[0].attributes[0].value;\n      var link = items.children[i].children[0].children[0].href;\n      var item = {\n        title: title + ' ' + episode.replace('Épisode ', ''),\n        link: link,\n        site: 'Univers Animeiz',\n        img: img,\n        lang: 'VOSTFR'\n      };\n      if (!isInArray(item, array)) array.push(item);\n    }\n  }\n};\n\nvar isInArray = function isInArray(item, array) {\n  var isInArray = false;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = _getIterator(array), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var anime = _step.value;\n      if (anime.title.includes(item.title)) return isInArray = true;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return isInArray;\n};","map":{"version":3,"sources":["/Users/kevhoque/Documents/MyTest/myJapan/helpers/Animes.js"],"names":["isInList","ANIME_SEIKOU","UNIVERSANIMEIZ","Axios","API","getApiAnimes","get","data","console","log","getAnimes","animes","getAnimeSeikou","getUniversAnimeiz","cache","JSON","parse","localStorage","getItem","animesDate","Date","setItem","array","i","json","formatJsonAnimeSeikou","formatJsonUniversAnimeiz","doc","DOMParser","parseFromString","items","getElementsByClassName","length","title","children","innerText","replace","toUpperCase","img","attributes","value","date","link","href","item","site","lang","isInArray","push","includes","episode","anime"],"mappings":"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","sourcesContent":["import { isInList } from './Shared'\nimport { ANIME_SEIKOU, UNIVERSANIMEIZ } from '../rss';\nimport Axios from 'axios';\nimport { API } from '../api'\n\nexport const getApiAnimes = async() => {\n    try {\n        const {data } = await Axios.get(`${API}/api/animes`)\n        return data\n    } catch(e) {\n        console.log(e)\n    }\n\n    return []\n}\n\nexport const getAnimes = async () => {\n    let animes = []\n    await getAnimeSeikou(animes)\n    await getUniversAnimeiz(animes)\n\n    let cache = JSON.parse(localStorage.getItem('cache'))\n    cache.animes = animes\n    cache.animesDate = new Date()\n    localStorage.setItem('cache', JSON.stringify(cache))\n\n    return animes\n}\n\nconst getAnimeSeikou = async (array) => {\n    for(let i = 1; i <= 2; i++) {\n        let json = await Axios.get('https://cors-anywhere.herokuapp.com/' + ANIME_SEIKOU + i + '/')\n        formatJsonAnimeSeikou(json, array)\n    }\n    return array\n}\n\nconst getUniversAnimeiz = async (array) => {\n    for(let i = 1; i <= 2; i++) {\n        let json = await Axios.get('https://cors-anywhere.herokuapp.com/' + UNIVERSANIMEIZ + i + '/')\n        formatJsonUniversAnimeiz(json, array)\n    }\n    return array\n}\n\nconst formatJsonAnimeSeikou = (json, array) => {\n    const doc = new DOMParser().parseFromString(json.data, 'text/html')\n    const items = doc.getElementsByClassName('slide-entry')\n    for(let i = 0; i < items.length; i++) {\n        let title = items[i].children[3].children[5].innerText\n        title = title.replace('VOSTFR', '')\n        title = title.replace('vostfr', '')\n        if(isInList(title.toUpperCase(), 'animes')) {\n            let img = items[i].children[0].children[0].attributes[2].value\n            let date = items[i].children[3].children[3].innerText\n            let link = items[i].children[0].href\n            let item = {\n                title: title,\n                link: link,\n                // pubDate: date,\n                site: 'Anime Seikou',\n                img: img,\n                lang: 'VOSTFR'\n            }\n            if(!isInArray(item, array))\n                array.push(item)\n        }\n    }\n}\n\nconst formatJsonUniversAnimeiz = (json, array) => {\n    const doc = new DOMParser().parseFromString(json.data, 'text/html')\n    const items = doc.getElementsByClassName('recent-posts')[0]\n    for(let i = 0; i < items.children.length; i++) {\n        let title = items.children[i].children[1].children[1].innerText\n        title = title.replace('VOSTFR', '')\n        title = title.replace('vostfr', '')\n        if(isInList(title.toUpperCase(), 'animes') && !title.includes('VF')) {\n            let episode = items.children[i].children[1].children[3].innerText\n            let img = items.children[i].children[0].children[0].children[0].attributes[0].value\n            let link = items.children[i].children[0].children[0].href\n            let item = {\n                title: title + ' ' + episode.replace('Épisode ', ''),\n                link: link,\n                site: 'Univers Animeiz',\n                img: img,\n                lang: 'VOSTFR'\n            }\n            if(!isInArray(item, array))\n                array.push(item)\n        }\n    }\n}\n\nconst isInArray = (item, array) => {\n    let isInArray = false\n    for(let anime of array){\n        if(anime.title.includes(item.title))\n            return isInArray = true\n    }\n    return isInArray\n}"]},"metadata":{},"sourceType":"module"}