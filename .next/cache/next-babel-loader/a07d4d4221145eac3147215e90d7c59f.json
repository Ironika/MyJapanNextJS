{"ast":null,"code":"import { ADALA, NAUTIJON, MANGASNEWS } from '../rss';\nimport adala from '../public/img/adala.png';\nimport { fetchRss } from './Shared';\nimport Axios from 'axios';\nimport { API } from '../api';\nexport const getApiNews = async () => {\n  try {\n    const {\n      data\n    } = await Axios.get(`${API}/api/news`);\n\n    if (data) {\n      for (let item of data) {\n        if (item.site === 'Adala-news') {\n          item.img = adala;\n        }\n      }\n    }\n\n    return data;\n  } catch (e) {\n    console.log(e);\n  }\n\n  return [];\n};\nexport const getNews = async () => {\n  let news = [];\n  let adala = await getAdalaNews();\n  let nautijon = await getNautijonNews();\n  let mangasNews = await getMangasNews();\n  news = news.concat(adala, nautijon, mangasNews);\n  news.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));\n  let cache = JSON.parse(localStorage.getItem('cache'));\n  cache.news = news;\n  cache.newsDate = new Date();\n  localStorage.setItem('cache', JSON.stringify(cache));\n  return news;\n};\n\nconst getAdalaNews = async () => {\n  let json = await fetchRss(ADALA);\n  let datas = formatJsonAdala(json);\n  return datas;\n};\n\nconst getNautijonNews = async () => {\n  let json = await fetchRss(NAUTIJON);\n  let datas = formatJsonNautijon(json);\n  return datas;\n};\n\nconst getMangasNews = async () => {\n  let json = await fetchRss(MANGASNEWS);\n  let datas = formatJsonMangasNews(json);\n  return datas;\n};\n\nconst formatJsonAdala = json => {\n  let array = [];\n  const items = json.rss.channel.item;\n\n  for (var i = 0; i < items.length; i++) {\n    let item = {\n      title: items[i].title['_text'],\n      desc: items[i].description['_cdata'],\n      link: items[i].link['_text'],\n      pubDate: items[i].pubDate['_text'],\n      category: items[i].category[0]['_cdata'],\n      site: 'Adala-news',\n      img: adala\n    };\n    array.push(item);\n  }\n\n  return array;\n};\n\nconst formatJsonNautijon = json => {\n  let array = [];\n  const items = json.rss.channel.item;\n\n  for (var i = 0; i < items.length; i++) {\n    const desc = items[i].description['_cdata'].split('<br />');\n    const src = desc[0].match('(https.*.jpg)');\n    let item = {\n      title: items[i].title['_text'],\n      desc: desc[1],\n      link: items[i].link['_text'],\n      pubDate: items[i].pubDate['_text'],\n      site: 'Nautijon',\n      img: src[0]\n    };\n    array.push(item);\n  }\n\n  return array;\n};\n\nconst formatJsonMangasNews = json => {\n  let array = [];\n  const items = json.rss.channel.item;\n\n  for (var i = 0; i < items.length; i++) {\n    const desc = items[i].description['_cdata'].split('<p>');\n    const src = desc[0].match('(https.*.jpg)');\n    let item = {\n      title: items[i].title['_text'],\n      desc: desc[1].replace('</p>', ''),\n      link: items[i].link['_text'],\n      pubDate: items[i].pubDate['_text'],\n      site: 'Mangas-News',\n      img: src ? src[0] : adala\n    };\n    array.push(item);\n  }\n\n  return array;\n};","map":{"version":3,"sources":["/Users/kevhoque/Documents/MyTest/myJapan/helpers/News.js"],"names":["ADALA","NAUTIJON","MANGASNEWS","adala","fetchRss","Axios","API","getApiNews","data","get","item","site","img","e","console","log","getNews","news","getAdalaNews","nautijon","getNautijonNews","mangasNews","getMangasNews","concat","sort","a","b","Date","pubDate","cache","JSON","parse","localStorage","getItem","newsDate","setItem","stringify","json","datas","formatJsonAdala","formatJsonNautijon","formatJsonMangasNews","array","items","rss","channel","i","length","title","desc","description","link","category","push","split","src","match","replace"],"mappings":"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","sourcesContent":["\nimport { ADALA, NAUTIJON, MANGASNEWS } from '../rss';\nimport adala from '../public/img/adala.png';\nimport { fetchRss } from './Shared'\nimport Axios from 'axios';\nimport { API } from '../api'\n\nexport const getApiNews = async() => {\n    try {\n        const { data } = await Axios.get(`${API}/api/news`)\n        if(data) {\n            for(let item of data) {\n                if(item.site === 'Adala-news') {\n                    item.img = adala\n                }\n            }\n        }\n        return data\n    } catch(e) {\n        console.log(e)\n    }\n\n    return []\n}\n\nexport const getNews = async () => {\n    let news = []\n    let adala = await getAdalaNews()\n    let nautijon = await getNautijonNews()\n    let mangasNews = await getMangasNews()\n\n    news = news.concat(adala, nautijon, mangasNews)\n\n    news.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate))\n\n    let cache = JSON.parse(localStorage.getItem('cache'))\n    cache.news = news\n    cache.newsDate = new Date()\n    localStorage.setItem('cache', JSON.stringify(cache))\n\n    return news\n}\n\nconst getAdalaNews = async () => {\n    let json = await fetchRss(ADALA)\n    let datas = formatJsonAdala(json)\n    return datas\n}\n\nconst getNautijonNews = async () => {\n    let json = await fetchRss(NAUTIJON)\n    let datas = formatJsonNautijon(json)\n    return datas\n}\n\nconst getMangasNews = async () => {\n    let json = await fetchRss(MANGASNEWS)\n    let datas = formatJsonMangasNews(json)\n    return datas\n}\n\nconst formatJsonAdala = (json) => {\n    let array = []\n    const items = json.rss.channel.item\n    for(var i = 0; i < items.length; i++) {\n        let item = {\n            title: items[i].title['_text'],\n            desc: items[i].description['_cdata'],\n            link: items[i].link['_text'],\n            pubDate: items[i].pubDate['_text'],\n            category: items[i].category[0]['_cdata'],\n            site: 'Adala-news',\n            img: adala\n        }\n        array.push(item)\n    }\n    return array\n}\n\nconst formatJsonNautijon = (json) => {\n    let array = []\n    const items = json.rss.channel.item\n    for(var i = 0; i < items.length; i++) {\n        const desc = items[i].description['_cdata'].split('<br />')\n        const src = desc[0].match('(https.*.jpg)')\n        let item = {\n            title: items[i].title['_text'],\n            desc: desc[1],\n            link: items[i].link['_text'],\n            pubDate: items[i].pubDate['_text'],\n            site: 'Nautijon',\n            img: src[0]\n        }\n        array.push(item)\n    }\n    return array\n}\n\nconst formatJsonMangasNews = (json) => {\n    let array = []\n    const items = json.rss.channel.item\n    for(var i = 0; i < items.length; i++) {\n        const desc = items[i].description['_cdata'].split('<p>')\n        const src = desc[0].match('(https.*.jpg)')\n        let item = {\n            title: items[i].title['_text'],\n            desc: desc[1].replace('</p>', ''),\n            link: items[i].link['_text'],\n            pubDate: items[i].pubDate['_text'],\n            site: 'Mangas-News',\n            img: src ? src[0] : adala\n        }\n        array.push(item)\n    }\n    return array\n}"]},"metadata":{},"sourceType":"module"}